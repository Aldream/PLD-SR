<html>
<head>
	<title>Serveur</title>
	<script src="http://code.jquery.com/jquery-1.7.1.js"></script>

	<script>
	
	var rest = "http://localhost:1337";
	$(document).ready(function() {
		function refreshAll() {
			$("#captorsValues").html("");
			for (var i = 0; i < 10; ++i) {
				$.get('/captors/' + i, function(data) {
					$("#captorsValues").append("<p>Capteur " + data.id + " : " + data.value + "</p>");
				}, "json");
			}
		}

		function getSensors() {
			$("#sensors").html("");
			/*
			$.post(rest + '/sensors/',
			  {"sensors":[{"id":"1"}]},
			  function(data) {
				$("#sensors").html(data);
			  },
			  "json");
			*/

			$.ajax({
				type: 'POST',
				url: rest + '/sensors',
				data: '{"sensors":[{"id":"1", "from":"2012/01/01 00:00:00"}]}',
				crossDomain: true,
				processData: false,
				success: function(data) {
					alert("COUCOU");
					$("#sensors").html(data);
				},
				dataType: "json"
			});
		}

		$("#getSensorsButtons").click(getSensors);
		getSensors();
	});
	</script>
</head>

<body>
	<h1>Sensors</h1>
	<input type="button" id="getSensorsButtons" value="Get sensors" />
	<div id="sensors">
		No captor value has been read.
	</div>

</body>

</html>
