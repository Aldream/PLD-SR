<!DOCTYPE HTML>

<html>

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

	<title>Liste des patients</title>
	<script src="http://code.jquery.com/jquery-1.7.1.js"></script>

	<script>
	var rest = "http://localhost:1337";
	
	function presentation(data) {
		
		var content = "<ul>";
		for (var i in data.hits) {
			var patient = data.hits[i];
			content += "<li>Patient " 
						+ ((patient.isMan) ? "M." : "Mme") + " "
						+ patient.nom +	" : Raison de l'hospitalisation : "
						+ patient.raisonHospitalisation + " / Pi√®ce : "
						+ patient.idPiece + "</li>"
		}
		content += "</ul>";
		
		$("#patients").html(content);
	}
	
	$(document).ready(function() {
		function getPatients() {
			$.post(rest + '/patients',
			  '{}',
			  presentation,
			  "json");
		}
		
		function getPatient(id) {
			$.post(rest + '/patients',
			  '{"id":'+id+'}',
			  presentation,
			  "json");
		}

		getPatient(1); // initially retrieves patients values on first time.
	});
	</script>
</head>

<body>
	<h1>Patients</h1>
	<div id="patients">
		There is no patient.
	</div>

</body>

</html>

