<html>
<head>
	<title>Serveur</title>
	<script src="http://code.jquery.com/jquery-1.7.1.js"></script>

	<script>
	
	var rest = "http://localhost:1337";
	$(document).ready(function() {
		function getSensors() {
			$("#sensors").html("");
			
			$.post(rest + '/sensors',
			  '{"sensors":[{"id":"1", "from":"2012/01/01 00:00:00"}]}',
			  function(data) {
				var records = data["records"];
				var codeToInsert = "<ul>";	
				for (var i in records) {
					codeToInsert += "<li>Capteur " + i + " : <ol>";
					for (var j in records[i]) {
						codeToInsert += "<li>" + records[i][j].time + " : "  + records[i][j].value + "</li>";
					}
					codeToInsert += "</ol></li>";
				}
				codeToInsert += "</ul>";
				$("#sensors").html(codeToInsert);	
			  },
			  "json");
		}

		$("#getSensorsButtons").click(getSensors);
		getSensors(); // initially retrieves sensors values on first time.
	});
	</script>
</head>

<body>
	<h1>Sensors</h1>
	<input type="button" id="getSensorsButtons" value="Get sensors" />
	<div id="sensors">
		No captor value has been read.
	</div>

</body>

</html>
